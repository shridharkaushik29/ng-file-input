angular.module("ngFileInput",[]).directive("fileInput",["$files",function(a){return{replace:true,require:"ngModel",restrict:"A",link:function(c,d,b,e){d.on("click",function(){a.choose().then(function(f){e.$setViewValue(f)})})}}}]).provider("$files",function(){this.$get=["$q",function(b){var a={};a.choose=function(e){var g=b.defer();var d=_.merge(e,{});var c=angular.element('<input type="file">');angular.element("body").append(c);c.hide();if(d.multiple){c.attr("multiple",true)}if(d.accept){var f;if(_.isArray(d.accept)){f=d.accept.join(",")}else{f=d.accept}c.attr("accept",f)}c.click();c.one("change",function(){var h;if(d.multiple){h=this.files}else{h=this.files[0]}h=a.mapInfo(h);g.resolve(h);c.remove()});return g.promise};a.mapInfo=function(c){if(c instanceof FileList){c=Array.from(c)}if(_.isArray(c)){_.forEach(c,function(d){d.url=URL.createObjectURL(d)})}else{if(_.isObject(c)){c.url=URL.createObjectURL(c)}}return c};return a}]});